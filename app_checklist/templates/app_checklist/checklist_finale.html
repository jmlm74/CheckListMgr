{# Template for finale --> input4  #}
{% extends 'base.html' %}
{% load static %}
{% load dis_play %}
{% load define %}
{% block body_block %}
    {% load crispy_forms_tags %}
    <div class="container" id="checklist_fin">
        {% include "partials/_modal.html" %}
        <div class="progress">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75"
                 aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
        </div>
        <div class="my_body" id="main">
            {% include 'partials/_title.html' %}
            {% if form.errors %}
                <p class="error">
                <ul class="errorslist">
                    {% for key, value in form.errors.items %}
                        <li>{% dis_play value|get_error_msg %}</li>
                    {% endfor %}
                </ul>
                </p>
            {% endif %}

            <form method="post" action="">
                {% csrf_token %}

                <div class="row">
                    <div class="form-group col-md-6">
                        {% dis_play "Uniquekey" %} : {{ form.cld_key }}
                    </div>

                    <div class="form-group col-md-6">
                        <span data-tooltip="date format : YYYY-MM-DD">{% dis_play "Datevalid" %}</span>
                        : {{ form.cld_date_valid }}
                        <span id="error_dat_valid" style="color: red"></span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <p class="form-group">
                            {% dis_play "Chklstvalid" %} : {{ form.cld_valid }}
                        </p>
                        <div class="form-group">
                            {% dis_play "Remarks" %} :<br/> {{ form.cld_remarks }}
                        </div>
                        {{ form.cld_fotosave.as_hidden }}
                    </div>
                    <div class="col-6">
                        <p class="form-group">
                            <br /><br/>
                            {% dis_play "Email" %} :<br />{{ form.cld_email }}
                        </p>
                    </div>
                </div>

                <span class="mt-3">Photos : 5 Max - 1Mo Max</span>
                <div class="dropzone dz" id="dropzoneForm">
                    <div class="fallback">
                        <input name="file" type="file" multiple/>
                    </div>
                </div>

                <div class="row col-12 mt-3">
                    <div class="col-6 col-md-3 mb-3">
                        <input type="submit" class="btn btn-primary" name="previous" value="{% dis_play "Previous" %}"/>
                    </div>
                    <div class="col-6 col-md-3 mb-3">
                        <a id="pdf-preview" class="btn btn-primary" target="_blank" rel="noopener"
                           href="{% url 'app_checklist:pdf' %} ">{% dis_play "PDFPreview" %}</a>
                    </div>
                    <div class="col-6 col-md-3 mb-3">
                        <div class="col-6 col-md-3 mb-3">
                            <input type="submit" class="btn btn-primary" name="submit" value="{% dis_play "Save" %}"/>
                        </div>
                    </div>
                    <div class="col-6 col-md-3 mb-3">
                        <div class="col-6 col-md-3 mb-3">
                            <input type="submit" class="btn btn-warning" name="keep" value="{% dis_play "Keep" %}"/>
                        </div>
                    </div>
                </div>
            </form>

        </div>
        {% include 'partials/_back.html' %}
    </div>


    <script>
        let uploadURL = "{%  url 'app_checklist:upload_photos' %}"
        let newchecklistID = "{{ newchecklist_id }}"
        let promptmsg = "{% dis_play "Msgcaption" %}"
        const removeURL = "{%  url 'app_checklist:remove_photos' %}"
    </script>
{% endblock %}